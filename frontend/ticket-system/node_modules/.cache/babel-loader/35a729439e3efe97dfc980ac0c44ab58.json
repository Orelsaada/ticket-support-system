{"ast":null,"code":"var _jsxFileName = \"F:\\\\react-small-projects\\\\ticket-support-system\\\\frontend\\\\ticket-system\\\\src\\\\components\\\\newIncident.js\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { useHistory } from \"react-router\";\nimport axios from \"axios\";\nimport { AuthContext } from \"./AuthContext\";\nimport { UserContext } from \"./UserContext\";\nimport \"./componentsStyles/newIncident.css\";\n\nfunction NewIncident() {\n  const [isAuthenticated, setIsAuthenticated] = useContext(AuthContext);\n  const [user, setUser] = useContext(UserContext);\n  const [myInputs, setMyInputs] = useState({});\n  const [msg, setMsg] = useState(\"\");\n  const history = useHistory(); // If user isn't login redirect to login\n\n  if (!isAuthenticated) return /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 32\n    }\n  });\n\n  const handleChange = e => {\n    setMyInputs({ ...myInputs,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const token = localStorage.getItem(\"token\");\n    const userId = localStorage.getItem(\"user-id\");\n    const userName = user.name;\n    const {\n      title,\n      description\n    } = myInputs;\n    const incident = {\n      userId,\n      userName,\n      title,\n      description\n    };\n    axios({\n      method: \"post\",\n      url: \"http://localhost:5000/api/incidents/new\",\n      data: incident,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-auth-token\": token\n      }\n    }).then(res => {\n      alert(res.data.msg);\n      history.push(\"/my-incidents\");\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"new-incident\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"Create new incident\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, \"Title *\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"title\",\n    name: \"title\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control\",\n    id: \"description\",\n    name: \"description\",\n    rows: \"5\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default NewIncident;","map":{"version":3,"sources":["F:/react-small-projects/ticket-support-system/frontend/ticket-system/src/components/newIncident.js"],"names":["React","useState","useContext","useEffect","Redirect","useHistory","axios","AuthContext","UserContext","NewIncident","isAuthenticated","setIsAuthenticated","user","setUser","myInputs","setMyInputs","msg","setMsg","history","handleChange","e","target","name","value","handleSubmit","preventDefault","token","localStorage","getItem","userId","userName","title","description","incident","method","url","data","headers","then","res","alert","push","catch","err","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"./AuthContext\";\r\nimport { UserContext } from \"./UserContext\";\r\nimport \"./componentsStyles/newIncident.css\";\r\n\r\nfunction NewIncident() {\r\n  const [isAuthenticated, setIsAuthenticated] = useContext(AuthContext);\r\n  const [user, setUser] = useContext(UserContext);\r\n  const [myInputs, setMyInputs] = useState({});\r\n  const [msg, setMsg] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  // If user isn't login redirect to login\r\n  if (!isAuthenticated) return <Redirect to=\"/\" />;\r\n\r\n  const handleChange = (e) => {\r\n    setMyInputs({\r\n      ...myInputs,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n    const userId = localStorage.getItem(\"user-id\");\r\n    const userName = user.name;\r\n    const { title, description } = myInputs;\r\n    const incident = { userId, userName, title, description };\r\n\r\n    axios({\r\n      method: \"post\",\r\n      url: \"http://localhost:5000/api/incidents/new\",\r\n      data: incident,\r\n      headers: { \"Content-Type\": \"application/json\", \"x-auth-token\": token },\r\n    })\r\n      .then((res) => {\r\n        alert(res.data.msg);\r\n        history.push(\"/my-incidents\");\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  return (\r\n    <section className=\"new-incident\">\r\n      <div className=\"container\">\r\n        <h1 className=\"title\">Create new incident</h1>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"title\">Title *</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"title\"\r\n              name=\"title\"\r\n              onChange={handleChange}\r\n            ></input>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"description\">Description</label>\r\n            <textarea\r\n              className=\"form-control\"\r\n              id=\"description\"\r\n              name=\"description\"\r\n              rows=\"5\"\r\n              onChange={handleChange}\r\n            ></textarea>\r\n          </div>\r\n          <input type=\"submit\" className=\"btn btn-primary\"></input>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default NewIncident;\r\n"]},"metadata":{},"sourceType":"module"}